const t=document.querySelector("#canvas");t.width=innerWidth,t.height=innerHeight;const e=t.getContext("2d"),n=new class{constructor(t){this.ctx=t,this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.lineWidth=6,this.ctx.lineCap="round",this.ctx.lineJoin="round"}drawLine(t,e){return this.restarting&&(this.restarting=!1,this.ctx.moveTo(t,e),this.ctx.beginPath()),this.ctx.lineTo(t,e),this.ctx.stroke(),this}end(){return this.restarting=!0,this.ctx.closePath(),this}}(e);let i=[],c=[],s=!1,a=!0;var r;t.addEventListener("touchstart",(function(t){if(a)return;s=!0;const{clientX:e,clientY:i}=t.touches[0];c=[{x:e,y:i}],n.drawLine(e,i)})),t.addEventListener("touchmove",(function(t){if(s){const{clientX:e,clientY:i}=t.touches[0];c.push({x:e,y:i}),n.drawLine(e,i)}})),t.addEventListener("touchend",(function(t){s=!1,i.push(c),c=[],n.end()})),axios.get("https://ff827abe-e27d-48d4-a09a-81355a2ce85d.bspapp.com/path/get",r).then((t=>{if(200===t.status)return t.data;throw new Error(t)})).then((({data:t})=>{t.length&&function(t){let e=0,i=0;const c=({x:t,y:e})=>{n.drawLine(t,e),requestAnimationFrame(s)},s=()=>{if(i>=t[e].length){if(n.end(),!(++e<t.length))return;i=0,setTimeout((()=>{c(t[e][i++])}),240)}else c(t[e][i++])};requestAnimationFrame(s)}(t[0].path)})),document.querySelector("#save").addEventListener("click",(function(t){var e;e=i,axios.post("https://ff827abe-e27d-48d4-a09a-81355a2ce85d.bspapp.com/path/add",{path:e,crateTime:Date.now()})}),!1),document.querySelector("#clear").addEventListener("click",(function(n){a=!1,e.clearRect(0,0,t.width,t.height)}),!1);
